# =============================================================================
# CDC Data Producer - Application Configuration
# =============================================================================

# Application name
quarkus.application.name=data-producer

# =============================================================================
# Data Producer Configuration
# =============================================================================

# Enable/disable the data producer (useful for maintenance)
producer.enabled=true

# Interval between data inserts
# Supports duration format: 1m (1 minute), 30s (30 seconds), 500ms (500 milliseconds)
# Default: 60s (1 minute)
producer.interval=60s

# =============================================================================
# MySQL Database Configuration
# =============================================================================

# JDBC connection URL
quarkus.datasource.db-kind=mysql
quarkus.datasource.jdbc.url=jdbc:mysql://mysql:3306/inventory

# Database credentials (should be overridden via environment variables in production)
quarkus.datasource.username=debezium
quarkus.datasource.password=dbz

# Connection pool settings
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=10
quarkus.datasource.jdbc.acquisition-timeout=30S

# =============================================================================
# HTTP Server Configuration
# =============================================================================

quarkus.http.port=8080

# =============================================================================
# Health Check Configuration
# =============================================================================

quarkus.smallrye-health.root-path=/health

# =============================================================================
# Logging Configuration
# =============================================================================

quarkus.log.level=INFO
quarkus.log.category."com.redhat.demo".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# =============================================================================
# OpenShift/Kubernetes Configuration
# =============================================================================

# Container image settings
quarkus.container-image.group=amq-streams-cdc
quarkus.container-image.name=data-producer
quarkus.container-image.tag=latest

# OpenShift deployment settings
quarkus.openshift.deploy=false
quarkus.openshift.expose=true
quarkus.openshift.replicas=1

# Resource limits
quarkus.openshift.resources.requests.memory=256Mi
quarkus.openshift.resources.requests.cpu=100m
quarkus.openshift.resources.limits.memory=512Mi
quarkus.openshift.resources.limits.cpu=250m

# Environment variables from secrets/configmaps
quarkus.openshift.env.mapping.MYSQL_HOST.from-configmap=data-producer-config
quarkus.openshift.env.mapping.MYSQL_HOST.with-key=mysql.host
quarkus.openshift.env.mapping.MYSQL_PORT.from-configmap=data-producer-config
quarkus.openshift.env.mapping.MYSQL_PORT.with-key=mysql.port
quarkus.openshift.env.mapping.MYSQL_DATABASE.from-configmap=data-producer-config
quarkus.openshift.env.mapping.MYSQL_DATABASE.with-key=mysql.database
quarkus.openshift.env.mapping.MYSQL_USER.from-secret=mysql-credentials
quarkus.openshift.env.mapping.MYSQL_USER.with-key=MYSQL_USER
quarkus.openshift.env.mapping.MYSQL_PASSWORD.from-secret=mysql-credentials
quarkus.openshift.env.mapping.MYSQL_PASSWORD.with-key=MYSQL_PASSWORD

# Labels
quarkus.openshift.labels."app.kubernetes.io/part-of"=amq-streams-cdc-demo
quarkus.openshift.labels."app.kubernetes.io/component"=data-producer

# =============================================================================
# Dev/Test Profile Overrides
# =============================================================================

# Development profile - use local MySQL
%dev.quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/inventory
%dev.producer.interval=10s

# Test profile
%test.quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/testdb
%test.producer.enabled=false

